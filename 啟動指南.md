# 🚀 自動化下載系統 - 啟動指南

## ⚠️ 編碼問題修復

原本的 `START.bat` 在 Windows 中執行時可能出現亂碼問題 (例如: `'��認' is not recognized...`)

**問題原因**: Windows 命令提示字元的編碼問題,導致中文字元無法正確顯示。

---

## ✅ 解決方案 - 三種啟動方式

### 方式 1: 使用 PowerShell 版本 (推薦)

**完美支援中文顯示,彩色輸出**

```powershell
# 右鍵點擊 START.ps1 → 使用 PowerShell 執行
# 或在 PowerShell 中執行:
.\START.ps1
```

**優點**:

- ✅ 完美處理 UTF-8 編碼
- ✅ 彩色輸出,易於閱讀
- ✅ 詳細的錯誤提示
- ✅ 自動檢查所有依賴

---

### 方式 2: 使用英文版 BAT (相容性最佳)

**完全避免編碼問題**

```batch
START_EN.bat
```

**優點**:

- ✅ 純英文訊息,無編碼問題
- ✅ 適用於所有 Windows 版本
- ✅ 簡單直接

---

### 方式 3: 直接執行 Python (進階用戶)

```batch
cd d:\OneDrive\學校上課\課程\四上\科學大數據專題\data_collector\auto_downloader
python quick_check.py
python complete_downloader.py
```

---

## 📋 系統需求檢查

執行啟動腳本前,會自動檢查:

1. ✅ **Python 環境** (3.7+)
2. ✅ **SRA Toolkit** (prefetch, fasterq-dump)
3. ✅ **Python 套件** (paramiko, tqdm)
4. ✅ **磁碟空間** (D 槽 200GB+)
5. ✅ **NAS 連線** (bioailab.synology.me)

---

## 🔧 如果檢查失敗

### SRA Toolkit 未安裝

```batch
# 執行自動安裝腳本
一鍵安裝_SRA_Toolkit.bat

# 或手動安裝
SETUP.bat
```

### Python 套件缺失

```batch
pip install paramiko tqdm
```

### 磁碟空間不足

清理 D 槽,確保至少有 200GB 可用空間

### NAS 連線失敗

1. 檢查網路連線
2. 確認 NAS 憑證正確
3. 測試連線: `ping bioailab.synology.me`

---

## 📊 系統配置

| 項目         | 設定值                  |
| ------------ | ----------------------- |
| CPU          | I7-11 代 (8 核 16 線程) |
| 並行樣本數   | 6 個                    |
| 每樣本線程   | 5 個                    |
| 總線程數     | 32 個                   |
| SRA 臨時目錄 | D:\sra_temp             |
| 解壓臨時目錄 | D:\tmp                  |
| FASTQ 輸出   | D:\tmp\fastq_output     |

---

## 🎯 快速開始

1. **第一次使用**:

   ```batch
   一鍵安裝_SRA_Toolkit.bat
   START.ps1
   ```

2. **日常使用**:
   ```batch
   START.ps1
   ```
   或
   ```batch
   START_EN.bat
   ```

---

## 🐛 常見問題

### Q: 為什麼出現亂碼?

A: Windows CMD 編碼問題,請使用 `START.ps1` (PowerShell) 或 `START_EN.bat` (英文版)

### Q: 如何確認 SRA Toolkit 已安裝?

A: 執行 `python quick_check.py`

### Q: 程序執行到一半停止了?

A: 檢查:

- D 槽空間是否充足
- 網路連線是否穩定
- NAS 是否可訪問

### Q: 如何查看詳細日誌?

A: 程序會將詳細資訊輸出到控制台,請保持視窗開啟

---

## 📞 需要協助?

1. 查看完整文檔: `PROJECT_GUIDE.md`
2. 檢查系統狀態: `python quick_check.py`
3. 診斷 SRA Toolkit: `診斷_SRA_Toolkit.bat`

---

## 🎉 準備完成!

選擇最適合您的啟動方式:

- 🌟 **推薦**: `START.ps1` (PowerShell,中文支援)
- 🔧 **穩定**: `START_EN.bat` (純英文,無編碼問題)
- ⚡ **進階**: 直接執行 Python 腳本

祝使用愉快! 🚀
